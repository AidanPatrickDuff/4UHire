<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>My Bookings</title>
	<h:outputStylesheet name="style2.css" library="css" />
	<link
		href="#{facesContext.externalContext.requestContextPath}/resources/css/style2.css"
		rel="stylesheet" type="text/css" />
</h:head>
<body>
	<div id="outer">
		<div id="wrapper">
			<div id="body-bot">
				<div id="body-top">
					<div id="logo">
						<br></br>
						<h1></h1>
						<p></p> 
					</div>
					<h:form>
					<div id="nav">
						<ul>
							<li><a href="index.jsf">Home</a></li>
							<li><h:commandLink action = "#{usersDataTable.userLoggedOn}">Profile</h:commandLink></li>
							<li><a href="SearchVehicles.jsf">Search</a></li>
							<li><a href="Login.jsf">Login</a></li>
							<li><a href="Login.jsf">Log out</a></li>
						</ul>
						<div class="clear"></div>
					</div>
					</h:form>
					<div id="gbox">
						<div id="gbox-top"></div>
						<div id="gbox-bg">
							<div id="gbox-grd">
								<h:form>
									<iodiv3>

									<h1>Your Bookings</h1>
									<br></br>
									<h:commandButton class="adddriverbutton"
										value="Return to Profile" action="Profile"></h:commandButton>

									<br></br>

									<h2>Vehicle Bookings</h2>
									<p:dataTable var="booking"
										value="#{usersDataTable.userLoggedInBookings}" border="1">
										<p:column>
											<f:facet name="header">Vehicle Make</f:facet>
											<h:outputText value="#{booking.vehicle.vehicleMake}" />
										</p:column>
										<p:column>
											<f:facet name="header">Vehicle Model</f:facet>
											<h:outputText value="#{booking.vehicle.vehicleModel}" />
										</p:column>
										<p:column>
											<f:facet name="header">Vehicle Reg</f:facet>
											<h:outputText value="#{booking.vehicle.vehicleReg}" />
										</p:column>
										<p:column>
											<f:facet name="header">Start Date</f:facet>
											<h:outputText value="#{booking.startDate}" />
										</p:column>
										<p:column>
											<f:facet name="header">Special Requests</f:facet>
											<h:outputText value="#{booking.specialRequests}"
												rendered="#{not booking.canEdit}" />
											<h:inputText style = "width: 3em" value="#{booking.specialRequests}"
												rendered="#{booking.canEdit}" />
										</p:column>
										<p:column>
											<f:facet name="header">Number of days</f:facet>
											<h:outputText value="#{booking.numberOfDays}"
												rendered="#{not booking.canEdit}" />
												<h:inputText style = "width: 3em" value = "#{booking.numberOfDays}" rendered="#{booking.canEdit}" />
											
										</p:column>
										<p:column>
											<f:facet name="header">Edit</f:facet>
											<h:commandLink value="Edit"
												action="#{bookingDataTable.editBooking(booking)}"
												rendered="#{not booking.canEdit}" />
										</p:column>

										<p:column>
											<f:facet name="header">Delete</f:facet>
											<h:commandLink value="Delete"
												action="#{bookingDataTable.deleteBooking(booking)}"
												rendered="#{not booking.canEdit}" />
										</p:column>

									</p:dataTable> <h:commandButton class="greenbutton" value="Save Changes"
										action="#{bookingDataTable.saveAction}"
										rendered="#{bookingDataTable.showSaveButton}" /> <br></br>
									<br></br>

									<h2>Event Bookings</h2>
									<p:dataTable var="booking"
										value="#{usersDataTable.userLoggedInEvents}" border="1">
										<p:column>
											<f:facet name="header">Event Type</f:facet>
											<h:outputText value="#{booking.event.eventType}" />
										</p:column>
										<p:column>
											<f:facet name="header">Start Date</f:facet>
											<h:outputText value="#{booking.startDate}" />
										</p:column>
										<p:column>
											<f:facet name="header">Number of Days</f:facet>
											<h:outputText value="#{booking.numberOfDays}"
												rendered="#{not booking.canEdit}" />
											<p:spinner  value="#{booking.numberOfDays}" min = "0"
												rendered="#{booking.canEdit}" />
										</p:column>
										<p:column>
											<f:facet name="header">Edit</f:facet>
											<h:commandLink value="Edit"
												action="#{eventBookingDataTable.editEventBooking(booking)}"
												rendered="#{not booking.canEdit}" />
										</p:column>

										<p:column>
											<f:facet name="header">Delete</f:facet>
											<h:commandLink value="Delete"
												action="#{eventBookingDataTable.deleteEventBooking(booking)}"
												rendered="#{not booking.canEdit}" />
										</p:column>


									</p:dataTable> <h:commandButton class="greenbutton" value="Save Changes"
										action="#{eventBookingDataTable.saveAction}"
										rendered="#{eventBookingDataTable.showSaveButton}" /> </iodiv3>
								</h:form>

							</div>
						</div>
						<div id="gbox-bot"></div>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
</html>

